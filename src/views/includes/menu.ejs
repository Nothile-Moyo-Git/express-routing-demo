<div class="toggle-menu-button toggle-menu-button__show" id="hide_menu">
    <svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="25px" width="25px" version="1.1" id="Capa_1" viewBox="0 0 490 490" xml:space="preserve">
        <polygon points="456.851,0 245,212.564 33.149,0 0.708,32.337 212.669,245.004 0.708,457.678 33.149,490 245,277.443 456.851,490   489.292,457.678 277.331,245.004 489.292,32.337 "/>
    </svg>
</div>

<div class="toggle-menu-button" id="show_menu">
    <svg viewBox="0 0 100 80" width="25" height="30">
        <rect width="100" height="10" fill="#FFFFFF"></rect>
        <rect y="30" width="100" height="10" fill="#FFFFFF"></rect>
        <rect y="60" width="100" height="10" fill="#FFFFFF"></rect>
    </svg>
</div>

<header class="header <%= isAuthenticated === true ? 'header__logged-in' : 'header__logged-out' %>" >

    <nav>
        <ul class="menu">

            <li class="menu__item">
                <a class="menu__link" href="/products">Products</a>
            </li>

            <% if (isAuthenticated === true) { %>

                <li class="menu__item">
                    <a class="menu__link" href="/cart">Cart</a>
                </li>

                <li class="menu__item">
                    <a class="menu__link" href="/orders">Orders</a>
                </li>

                <li class="menu__item">
                    <a class="menu__link" href="/admin/add-product">Add Product</a>
                </li>

                <li class="menu__item">
                    <a class="menu__link" href="/admin/products">Admin Products</a>
                </li>

                <li class="menu__item">
                    <a class="menu__link" href="/profile">Profile</a>
                </li>

                <li class="menu__item">
                    <form action="/logout" method="POST" class="menu__form" enctype="multipart/form-data">
                        <input type="hidden" name="csrfToken" value=<%= csrfToken %>/>
                        <input type="submit" class="menu__logout-text" value="Logout"/>
                    </form>
                </li>
                
            <% } else { %>

                <li class="menu__item">
                    <a class="menu__link" href="/signup">Signup</a>
                </li>

                <li class="menu__item">
                    <a class="menu__link"href="/login">Login</a>
                </li>

            <% } %>

        </ul>
    </nav>

</header>

<script>

    // Event handlers here, we do it here because we're simply toggling a menu and we need to do it client side
    document.getElementById("hide_menu").onclick = (event) => {

        // Hide the menu
        document.querySelector("header").classList.add("hidden", "hidden--show-desktop");

        // Remove the margin from the bodu of the DOM
        document.body.classList.remove("menu-open");

        // Show the hamburger menu icon
        document.querySelector("#show_menu").classList.add("show");
        document.querySelector("#show_menu").classList.remove("hidden");

        document.querySelector("#hide_menu").classList.add("hidden"); 
        document.querySelector("#hide_menu").classList.remove("show");
        
    };

    document.getElementById("show_menu").onclick = (event) => {

        // Show the menu
        document.querySelector("header").classList.remove("hidden", "hidden--show-desktop");

        // Add the margin spacing back in
        document.body.classList.add("menu-open");

        // Alternate between the hamburger icon and the cross
        document.querySelector("#show_menu").classList.add("hidden");
        document.querySelector("#show_menu").classList.remove("show");

        document.querySelector("#hide_menu").classList.add("show");
        document.querySelector("#hide_menu").classList.remove("hidden");
    };

</script>
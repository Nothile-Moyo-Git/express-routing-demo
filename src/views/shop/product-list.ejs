<%- include('../includes/header'); %>
    <body>

        <%- include('../includes/menu'); %>

        <main class="content">

            <h1><%= pageTitle %></h1>

            <% if (isAuthenticated === true) { %>

                <% if (hasProducts) {%>

                    <ul class="card-list">

                        <% prods.forEach((product) => { %>
                            <li class="card">
                                <h3 class="card__title"><%= product.title %></h3>
                                <img 
                                    src=<%= product.image%>
                                    alt="Shop Item Logo Image"
                                    class="card__img"
                                />
                                <p class="card__price">Â£<%= product.price %></p>
                                <p class="card__desc"><%= product.description %></p>
                                <div class="card__forms">
                                    <a class="card__button" href="<%= `/product-detail/${product._id.toString()}` %>">Details</a>
                                    
                                    <form action="/cart" method="POST" class="card__form">
                                        <button class="card__button">Add To Cart</button>
                                        <input type="hidden" name="productId" value="<%= product._id.toString() %>"/>
                                    </form>
                                </div>
                            </li>
                        <% }) %>

                    </ul>

                <% } %>

            <% } else { %>

                <div class="fallback">
                    <h1 class="fallback__title">You need to be logged in to view this page</h1>
                    <a href="/login" class="fallback__link">Go to login page</a>
                </div>

            <% } %>

        </main>

    </body>
    
<%- include('../includes/footer'); %>

